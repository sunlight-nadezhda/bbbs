(()=>{"use strict";function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._handleClose=this._handleCloseMenu.bind(this),this._menuSettings=e,this._mediaQuery=window.matchMedia("(min-width: 1320px)")}var i,s;return i=t,(s=[{key:"_handleViewMenu",value:function(){this._toggleClassList(),this._menuSettings.closeButton.addEventListener("click",this._handleClose)}},{key:"_handleCloseMenu",value:function(){this._menuSettings.header.classList.contains("header__overlay")&&(this._toggleClassList(),this._menuSettings.closeButton.removeEventListener("click",this._handleClose))}},{key:"_toggleClassList",value:function(){this._menuSettings.header.classList.toggle("header__overlay"),this._menuSettings.header.classList.toggle("header_fixed"),this._menuSettings.menu.classList.toggle("header__item_active"),this._menuSettings.closeButton.classList.toggle("header__item_active"),this._menuSettings.menuButton.classList.toggle("header__item_inactive"),this._menuSettings.personalAccountButton.classList.toggle("header__item_active"),this._menuSettings.content.classList.toggle("content_inactive"),this._menuSettings.headerSearch&&this._menuSettings.headerSearch.classList.toggle("header__item_inactive")}},{key:"_closeColumnMenu",value:function(){this._mediaQuery.matches&&this._menuSettings.menu.classList.contains("header__item_active")&&this._handleCloseMenu()}},{key:"_showFixedMenu",value:function(){this._prevScrollPos||(this._prevScrollPos=0);var e=window.scrollY;e<this._prevScrollPos&&this._mediaQuery.matches&&e>100?this._menuSettings.header.classList.add("header_fixed"):e>this._prevScrollPos&&this._mediaQuery.matches&&e>100||e<=100&&this._mediaQuery.matches&&this._menuSettings.header.classList.contains("header_fixed")?this._menuSettings.header.classList.remove("header_fixed"):e<this._prevScrollPos&&!this._mediaQuery.matches&&e>100&&!this._menuSettings.header.classList.contains("header_fixed")?this._handleViewMenu():(e>this._prevScrollPos&&!this._mediaQuery.matches&&e>100&&this._menuSettings.header.classList.contains("header_fixed")||e<=100&&!this._mediaQuery.matches&&this._menuSettings.header.classList.contains("header_fixed"))&&this._handleCloseMenu(),this._prevScrollPos=e}},{key:"setEventListeners",value:function(){this._menuSettings.menuButton.addEventListener("click",this._handleViewMenu.bind(this)),this._menuSettings.personalAccountButton&&this._menuSettings.personalAccountButton.addEventListener("mouseup",this._handleCloseMenu.bind(this)),this._menuSettings.changeCity&&this._menuSettings.changeCity.addEventListener("mouseup",this._handleCloseMenu.bind(this)),window.addEventListener("resize",this._closeColumnMenu.bind(this)),document.addEventListener("scroll",this._showFixedMenu.bind(this))}}])&&e(i.prototype,s),t}();function i(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._widgetElement=t,this._mediaQueryFull=window.matchMedia("(min-width: 1441px)"),this._mediaQueryWide=window.matchMedia("(min-width: 1025px) and (max-width: 1440px)"),this._mediaQueryMiddle=window.matchMedia("(min-width: 681px) and (max-width: 1024px)"),this._mediaQuerySmall=window.matchMedia("(max-width: 425px)"),this._temporaryWidth=420,this._temporaryHeight=627}var t,s;return t=e,(s=[{key:"_setSizeOfWidget",value:function(e,t){this._temporaryWidth==e&&this._temporaryHeight==t||(this._widgetElement.src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FBigBrothers.BigSisters.Russia&tabs=timeline&width=".concat(e,"&height=").concat(t,"&small_header=false&adapt_container_width=true&hide_cover=false&show_facepile=false&appId"),this._widgetElement.width="".concat(e),this._widgetElement.height="".concat(t),this._temporaryWidth=e,this._temporaryHeight=t)}},{key:"_resizeWidget",value:function(){this._mediaQueryFull.matches&&this._setSizeOfWidget(420,627),this._mediaQueryWide.matches&&this._setSizeOfWidget(370,627),this._mediaQueryMiddle.matches&&this._setSizeOfWidget(370,552),this._mediaQuerySmall.matches&&this._setSizeOfWidget(290,433)}},{key:"setEventListeners",value:function(){this._widgetElement&&window.addEventListener("resize",this._resizeWidget.bind(this))}}])&&i(t.prototype,s),e}();function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var a,o,c,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectElement=t,this._buttonSelect=this._selectElement.querySelector(".select-activity__icon"),this._listItems=this._selectElement.querySelector(".select-activity__items"),this._title=this._selectElement.querySelector(".select-activity__title"),this._handleSelectItem=this._handleSelectItem.bind(this)}var t,i;return t=e,(i=[{key:"_handleViewSelect",value:function(){this._toggleClassList(),this._listItems.addEventListener("click",this._handleSelectItem)}},{key:"_handleSelectItem",value:function(e){e.target.classList.contains("select-activity__item")&&(this._title.textContent=e.target.textContent,this._toggleClassList(),this._listItems.removeEventListener("click",this._handleSelectItem))}},{key:"_toggleClassList",value:function(){this._title.classList.contains("select-activity__title_opened")||this._title.classList.add("select-activity__title_opened"),this._listItems.classList.toggle("select-activity__items_opened"),this._selectElement.classList.toggle("select-activity_opened"),this._buttonSelect.classList.toggle("select-activity__icon_type_opened")}},{key:"setEventListeners",value:function(){this._title.addEventListener("click",this._handleViewSelect.bind(this)),this._buttonSelect.addEventListener("click",this._handleViewSelect.bind(this))}}])&&n(t.prototype,i),e}(),r={header:document.querySelector(".header"),menuButton:document.querySelector(".header__button_type_menu"),closeButton:document.querySelector(".header__button-close"),menu:document.querySelector(".header__menu"),menuSocials:document.querySelector(".header__menu-socials"),personalAccountButton:document.querySelector(".header__button_type_personal-account"),content:document.querySelector(".content"),changeCity:document.querySelector(".header__change-city"),headerSearch:document.querySelector(".header__search")},u=document.querySelector(".popup_type_login"),d=document.querySelector(".popup_type_video"),h=document.querySelector(".popup_type_city"),_=document.querySelector(".widget"),p=document.querySelector(".video-bigcard__link"),m=document.querySelector(".popup_type_calendar"),g=document.querySelector(".popup_type_confirm"),y=document.querySelector(".popup_type_success"),v=document.querySelector(".popup_type_recomendation-place"),f=document.querySelector(".popup_type_togo-success"),S=document.querySelector(".select-activity");function L(e){e&&e.classList.add("popup_opened")}function w(e){o.offsetWidth!=S.offsetWidth&&(o.style.width=S.offsetWidth+"px"),o.innerHTML=e.target.value;var t=o.offsetHeight;13==e.keyCode?t+=15:t<48&&(t=48),a.style.height=t+"px"}function b(){window.matchMedia("(max-width: 830px)").matches?(a.placeholder="Комментарий*",c.classList.add("popup__field-address_inactive")):(a.placeholder="Комментарий* Поделитесь впечатлениями о проведенном времени",c.classList.remove("popup__field-address_inactive"))}v&&(c=v.querySelector(".popup__field-address"),a=v.querySelector(".popup__textarea"),o=v.querySelector(".popup__pseudo-textarea")),new t(r).setEventListeners(),new s(_).setEventListeners(),S&&new l(S).setEventListeners(),r.personalAccountButton&&r.personalAccountButton.addEventListener("click",(function(){L(u)})),p&&p.addEventListener("click",(function(){L(d)})),r.changeCity&&r.changeCity.addEventListener("click",(function(){L(h)})),document.addEventListener("click",(function(e){(e.target.classList.contains("popup__btn-close")||e.target.classList.contains("popup")||e.target.classList.contains("popup__btn-return"))&&(v&&v.classList.contains("popup__opened")&&(a.removeEventListener("keyup",w),window.removeEventListener("resize",setPlaceHolderText)),function(e){e.target.closest(".popup").classList.remove("popup_opened")}(e)),e.target.classList.contains("calendar__full-view-button")&&L(m),e.target.classList.contains("button_singup")&&(document.querySelector(".popup_opened")&&document.querySelector(".popup_opened").classList.remove("popup_opened"),L(g)),e.target.classList.contains("popup__btn-confirm")&&(document.querySelector(".popup_opened").classList.remove("popup_opened"),L(y)),e.target.classList.contains("togo-page__clickable-header_place_page")&&(L(v),v.offsetWidth<770&&(a.placeholder="Комментарий*",c.classList.add("popup__field-address_inactive")),a.addEventListener("keyup",w),window.addEventListener("resize",b)),e.target.classList.contains("popup__btn-submit_place_togo")&&(e.preventDefault(),document.querySelector(".popup_opened").classList.remove("popup_opened"),L(f))}))})();